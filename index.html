<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>멤버카드 작성</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <style>
    .postingbox {
      padding: 50px;
      width: 700px;
      margin: 30px auto 2px auto;

      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    .textbox {
      padding-top: 10px;
      width: 350px;
      margin: auto 0px auto 30px;
    }

    .imagebox {
      box-shadow: 0px 0px 5px 0px gray;
      width: 180px;
      height: 220px;
      margin: 10px 30px auto 0px;
    }

    .mybtn {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .mybtn>button {
      margin-right: 10px;
    }
  </style>
  <script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import {
      collection,
      addDoc,
    } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Firebase 구성 정보 설정
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBjmjaU6tpnJAy6Gtvps-7B6m3Rp6bbaOE",
      authDomain: "sparta-6b12e.firebaseapp.com",
      projectId: "sparta-6b12e",
      storageBucket: "sparta-6b12e.appspot.com",
      messagingSenderId: "177634674627",
      appId: "1:177634674627:web:8ed3250a694a63aa465f76",
      measurementId: "G-DC20VH5P2J",
    };

    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    $("#postingbtn").click(async function () {
      let name = $("#name").val();
      let image = $("#image").val();
      let role = $("#role").val();
      let mbti = $("#mbti").val();
      let github = $("#github").val();
      let oneword = $("#oneword").val();
      let oneintro = $("#oneintro").val();
      let intro = $("#intro").val();
      let blog = $("blog").val();

      let doc = {
        'name': name,
        'blog': blog,
        'image': image,
        'role': role,
        'mbti': mbti,
        'github': github,
        'oneword': oneword,
        'oneintro': oneintro,
        'intro': intro,
      };
      await addDoc(collection(db, "화이팅하시조"), doc);
      alert("업로드 완료!");
      window.location.reload();
    });

    $("#closebtn").click(async function () {
      window.close();
    })
  </script>
</head>

<body>
  <div class="postingbox">
    <img
      src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgc-2fxTmd4oImVltrNn9VdVnYb5mqa4o_Ocb69vIT9Gah8Jx2cY_YtR1WznsC58O6vLw&usqp=CAU"
      class="imagebox" id="imagebox" alt="..." />
    <div class="textbox" id="textInput">
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">이름</label>
        <input type="email" class="form-control" id="name" />
      </div>
      <div class="row g-1 mb-3">
        <label for="inputPassword2" class="form-label">이미지 링크</label>
        <div class="col-auto">
          <input type="email" class="form-control" id="image" />
        </div>
        <div class="col-auto">
          <button type="submit" class="btn btn-primary mb-3" id="previewbtn">
            미리 보기
          </button>
        </div>
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">역할</label>
        <input type="email" class="form-control" id="role" />
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">mbti</label>
        <input type="email" class="form-control" id="mbti" />
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">블로그</label>
        <input type="email" class="form-control" id="blog" />
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">Github</label>
        <input type="email" class="form-control" id="github" />
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">한마디</label>
        <input type="email" class="form-control" id="oneword" />
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">한줄소개</label>
        <input type="email" class="form-control" id="oneintro" />
      </div>
      <div class="mb-3">
        <label for="exampleFormControlTextarea1" class="form-label">자기소개</label>
        <textarea class="form-control" id="intro" rows="3"></textarea>
      </div>
    </div>
  </div>
  <div class="mybtn">
    <button id="postingbtn" type="button" class="btn btn-dark">업로드</button>
    <button id="closebtn" type="button" class="btn btn-outline-dark">닫기</button>
  </div>
</body>

</html>
